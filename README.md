# QR Code Generator Chrome Extension

一款简洁高效的Chrome浏览器插件，为用户提供快速生成、编辑和下载二维码的功能，提升工作效率。

## 功能特性

### 🎯 核心功能

- **当前页面二维码**：一键生成当前浏览器页面的URL二维码
- **选中文本二维码**：将选中的文本内容生成二维码
- **自定义内容二维码**：用户输入任意内容生成二维码
- **多种数据类型支持**：
  - URL链接
  - 纯文本
  - 电话号码
  - 邮箱地址
  - WiFi信息
  - 联系人信息(vCard)

### 🎨 编辑功能

- **样式自定义**：
  - 前景色/背景色选择
  - 二维码尺寸调整
  - 边距设置
  - Logo添加和透明度设置
- **实时预览**：编辑时实时查看效果

### 💾 下载功能

- **格式支持**：
  - PNG格式（默认）
  - SVG格式（矢量）
  - JPG格式
- **尺寸选项**：
  - 小尺寸（256x256）
  - 中尺寸（512x512）
  - 大尺寸（1024x1024）

### 📱 扫描功能

- **本地扫描**：使用摄像头扫描二维码
- **图片扫描**：上传图片文件识别二维码
- **历史记录**：保存扫描历史，支持favicon缓存

### 🔧 辅助功能

- **右键菜单集成**：选中文本、链接、图片右键生成二维码
- **快捷键支持**：
  - `Ctrl+Shift+Q`：快速生成当前页面二维码
  - `Ctrl+Shift+T`：生成选中文本二维码
- **历史记录**：保存最近生成的二维码，支持快速重新生成和智能去重
- **智能favicon**：自动获取并缓存网站图标

## 技术特性

### 🚀 性能优化
- **Manifest V3**：使用最新的Chrome扩展架构
- **最小权限原则**：仅请求必要的权限
- **异步加载**：优化favicon加载体验
- **内存优化**：高效的二维码生成算法

### 🛡️ 安全特性
- **本地处理**：二维码生成在本地完成，保护隐私
- **权限控制**：精确的权限管理
- **数据安全**：历史记录本地存储

### 🎨 用户体验
- **现代化UI**：简洁美观的界面设计
- **响应式设计**：适配不同屏幕尺寸
- **实时反馈**：操作即时响应
- **智能缓存**：提升加载速度

## 安装方法

### 方法一：开发者模式安装

1. 下载或克隆本项目到本地
2. 打开Chrome浏览器，进入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 插件安装完成，可以在工具栏看到插件图标

### 方法二：Chrome Web Store安装

1. 访问Chrome Web Store
2. 搜索"QR Code Generator"
3. 点击"添加至Chrome"
4. 确认安装

## 使用方法

### 基本使用

1. **生成当前页面二维码**：
   - 点击插件图标
   - 选择"当前页面"标签
   - 点击"生成二维码"

2. **生成选中文本二维码**：
   - 在网页上选中文本
   - 点击插件图标
   - 选择"选中文本"标签
   - 点击"生成二维码"

3. **生成自定义内容二维码**：
   - 点击插件图标
   - 选择"自定义"标签
   - 输入内容并选择类型
   - 点击"生成二维码"

### 高级功能

1. **编辑二维码样式**：
   - 生成二维码后点击"编辑样式"
   - 调整颜色、尺寸、边距等
   - 点击"应用"保存更改

2. **下载二维码**：
   - 生成二维码后点击"下载"
   - 选择格式和尺寸
   - 输入文件名
   - 点击"下载"

3. **扫描二维码**：
   - 切换到"扫描"标签页
   - 选择"摄像头扫描"或"图片扫描"
   - 查看扫描结果

4. **查看历史记录**：
   - 切换到"历史"标签页
   - 点击历史记录重新生成
   - 点击"清空历史"删除所有记录

### 右键菜单

- 选中文本 → 右键 → "生成选中文本的二维码"
- 链接 → 右键 → "生成链接的二维码"
- 图片 → 右键 → "生成图片链接的二维码"
- 页面 → 右键 → "生成当前页面的二维码"

### 快捷键

- `Ctrl+Shift+Q`：生成当前页面二维码
- `Ctrl+Shift+T`：生成选中文本二维码

**详细说明**：请参考 [KEYBOARD_SHORTCUTS.md](KEYBOARD_SHORTCUTS.md) 了解完整的快捷键使用指南。

## 项目结构

```
chrome-extension-qrcode/
├── manifest.json          # 插件配置文件
├── popup.html             # 弹出窗口HTML
├── popup.css              # 弹出窗口样式
├── popup.js               # 弹出窗口逻辑
├── background.js          # 后台脚本
├── content.js             # 内容脚本
├── libs/                  # 第三方库
│   ├── qrcode.js          # QR码生成库
│   ├── jsqr.js            # QR码扫描库
│   └── qrcode-with-logo.js # 带Logo的QR码库
├── icons/                 # 图标文件夹
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
├── asserts/               # 资源文件
│   ├── scan.svg
│   ├── download.svg
│   ├── palette.svg
│   └── copysvg.svg
└── README.md              # 说明文档
```

## 技术实现

### 核心技术

- **Chrome Extension API**：使用Manifest V3
- **QR码生成**：qrcodejs库
- **QR码扫描**：jsQR库
- **样式框架**：原生CSS + 现代设计
- **数据存储**：Chrome Storage API
- **权限管理**：最小权限原则

### 主要模块

1. **Popup模块**：用户界面和交互逻辑
2. **Background模块**：后台服务和右键菜单
3. **Content模块**：页面交互和文本获取
4. **QR生成模块**：二维码生成和样式处理
5. **QR扫描模块**：摄像头和图片扫描
6. **存储模块**：历史记录和设置管理
7. **Favicon模块**：网站图标获取和缓存

### 权限说明

- `activeTab`：访问当前标签页内容
- `contextMenus`：创建右键菜单
- `storage`：保存历史记录和设置
- `downloads`：下载生成的二维码
- `tabs`：获取标签页信息
- `http://*/*, https://*/*`：访问网页内容

## 开发说明

### 开发环境

- Chrome浏览器 >= 88
- 文本编辑器（VS Code推荐）
- 基本的HTML/CSS/JavaScript知识

### 调试方法

1. 在 `chrome://extensions/` 页面点击"检查视图"
2. 使用Chrome DevTools调试
3. 查看Console日志输出

### 自定义开发

1. 修改 `popup.html` 和 `popup.css` 调整界面
2. 修改 `popup.js` 调整功能逻辑
3. 修改 `background.js` 调整后台服务
4. 修改 `content.js` 调整页面交互

## 常见问题

### Q: 插件无法安装？
A: 确保Chrome版本 >= 88，并开启开发者模式

### Q: 二维码生成失败？
A: 检查网络连接，确保QR码库正常加载

### Q: 右键菜单不显示？
A: 检查插件权限，确保已授予contextMenus权限

### Q: 快捷键不工作？
A: 检查是否有其他插件冲突，或重新安装插件

### Q: 历史记录丢失？
A: 历史记录存储在本地，清除浏览器数据会丢失

### Q: Favicon不显示？
A: 插件会自动获取网站图标，如果失败会显示默认图标

## 更新日志

### v1.1.0 (2024-12-19)
- 优化权限管理，移除未使用的权限
- 修复插件图标显示问题
- 改进favicon加载逻辑，支持占位符和异步加载
- 修复右键菜单功能，正确生成选中内容的二维码
- 添加favicon缓存机制，提升性能
- 优化错误处理，修复DOM操作异常
- 新增快捷键功能：选中文本二维码生成 (`Ctrl+Shift+T`)
- 完善快捷键配置和跨平台兼容性
- 新增历史记录智能去重功能，避免重复记录

### v1.0.0 (2024-12-19)
- 初始版本发布
- 支持基本的二维码生成功能
- 支持样式编辑和下载
- 支持右键菜单和快捷键
- 支持历史记录管理

## 贡献指南

欢迎提交Issue和Pull Request来改进这个插件！

### 开发流程

1. Fork本项目
2. 创建功能分支
3. 提交代码更改
4. 创建Pull Request

### 代码规范

- 使用ES6+语法
- 遵循Chrome Extension最佳实践
- 添加适当的注释
- 保持代码简洁可读

## 许可证

MIT License

## 联系方式

如有问题或建议，请通过以下方式联系：

- 提交GitHub Issue
- 发送邮件至：[your-email@example.com]

---

**注意**：这是一个开源项目，仅供学习和个人使用。商业使用请遵守相关法律法规。 