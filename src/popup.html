<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A simple and efficient QR Code Generator extension for Chrome. Generate QR codes for current page URL, selected text, or custom content. Scan QR codes from images.">
    <title>QR Code Generator</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="header-text">
                    <div class="title-container">
                        <div class="cloud-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 10H16.74C16.3659 7.49025 14.2356 5.5 11.64 5.5C9.17347 5.5 7.12647 7.22729 6.5 9.5C4.5 9.5 3 11 3 13C3 15 4.5 16.5 6.5 16.5H18C19.6569 16.5 21 15.1569 21 13.5C21 11.8431 19.6569 10.5 18 10Z" fill="#87CEEB"/>
                                <path d="M20 12C20 13.1046 19.1046 14 18 14C16.8954 14 16 13.1046 16 12C16 10.8954 16.8954 10 18 10C19.1046 10 20 10.8954 20 12Z" fill="#4682B4"/>
                            </svg>
                        </div>
                        <h1 class="title" data-i18n="popup_title_placeholder">Title</h1>
                    </div>
                    <input type="text" class="subtitle url-input" id="current-url" placeholder="Loading..." data-i18n-placeholder="popup_url_loading" />
                </div>
            </div>
        </header>

        <!-- QR Code Display Section -->
        <div class="qr-display-section">
            <div class="qr-container" id="qr-container">
                <div class="qr-placeholder">
                    <span class="placeholder-icon">ðŸ“±</span>
                    <p data-i18n="popup_qr_generating">Generating QR Code...</p>
                </div>
            </div>
        </div>

        <!-- Action Buttons Section -->
        <div class="action-buttons">
            <div class="primary-buttons">
                <button class="action-btn primary download" id="download-btn">
                    <img src="assets/download.svg" alt="Download" class="icon" data-i18n-alt="popup_download_icon_alt">
                    <span data-i18n="popup_download_button">Download QR Code</span>
                </button>
                <button class="action-btn primary copy" id="copy-btn">
                    <img src="assets/copysvg.svg" alt="Copy" class="icon" data-i18n-alt="popup_copy_icon_alt">
                </button>
            </div>
            <div class="secondary-buttons">
                <button class="action-btn secondary" id="edit-btn">
                    <img src="assets/palette.svg" alt="Edit" class="icon" data-i18n-alt="popup_edit_icon_alt">
                    <span data-i18n="popup_edit_button">Edit QR Code</span>
                </button>
                <button class="action-btn secondary" id="scan-btn">
                    <img src="assets/scan.svg" alt="Scan" class="icon" data-i18n-alt="popup_scan_icon_alt">
                    <span data-i18n="popup_scan_button">Scan QR Code</span>
                </button>
            </div>
            <div class="bottom-icons">
                <button class="bottom-icon-btn" id="history-btn" title="History" data-i18n-title="popup_history_button_title">
                    <img src="assets/history.svg" alt="History" width="16" height="16">
                </button>
                <div class="right-icons">
                    <button class="bottom-icon-btn" id="star-btn" title="Rate 5 Stars" data-i18n-title="popup_rate_button_title">
                        <img src="assets/rate.svg" alt="Rate 5 Stars" width="16" height="16">
                    </button>
                    <button class="bottom-icon-btn" id="feedback-btn" title="Feedback" data-i18n-title="popup_feedback_button_title">
                        <img src="assets/feedback.svg" alt="Feedback" width="16" height="16">
                    </button>
                    <button class="bottom-icon-btn" id="sponsor-btn" title="Sponsor" data-i18n-title="popup_sponsor_button_title">
                        <img src="assets/sponsors.svg" alt="Sponsor" width="16" height="16">
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit QR Code Modal -->
    <div class="modal" id="edit-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_edit_modal_title">Edit QR Code</h3>
                <button class="close-btn" id="close-edit-modal">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="edit-section">
                    <h4 data-i18n="popup_edit_modal_color_section">Color Settings</h4>
                    <div class="color-inputs">
                        <div class="color-input">
                            <label data-i18n="popup_edit_modal_foreground_label">Foreground:</label>
                            <input type="color" id="foreground-color" value="#000000">
                        </div>
                        <div class="color-input">
                            <label data-i18n="popup_edit_modal_background_label">Background:</label>
                            <input type="color" id="background-color" value="#FFFFFF">
                        </div>
                    </div>
                </div>
                
                <div class="edit-section">
                    <h4 data-i18n="popup_edit_modal_size_section">Size Settings</h4>
                    <div class="size-inputs">
                        <div class="size-input">
                            <label data-i18n="popup_edit_modal_width_label">Width:</label>
                            <input type="number" id="qr-width" value="512" min="120" max="1024">
                        </div>
                        <div class="size-input">
                            <label data-i18n="popup_edit_modal_height_label">Height:</label>
                            <input type="number" id="qr-height" value="512" min="120" max="1024">
                        </div>
                    </div>
                </div>
                
                <div class="edit-section">
                    <h4 data-i18n="popup_edit_modal_logo_section">Logo Settings</h4>
                    <div class="logo-inputs">
                        <!-- å†…ç½® Logo é€‰æ‹© -->
                        <div class="builtin-logo-section">
                            <div class="builtin-logo-grid" id="builtin-logo-grid">
                                <!-- Logo é€‰é¡¹å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                        <div class="logo-divider" data-i18n="popup_edit_modal_logo_divider">OR</div>
                        <!-- è‡ªå®šä¹‰ Logo ä¸Šä¼  -->
                        <div class="file-input-wrapper">
                            <input type="file" id="logo-file" accept="image/*">
                            <label for="logo-file" class="file-input-label" id="logo-file-label">
                                <span class="file-input-text" data-i18n="popup_edit_modal_choose_logo">Choose Logo File</span>
                                <span class="file-input-hint" data-i18n="popup_common_no_file_selected">No file selected</span>
                            </label>
                            <div class="file-selected-display" id="logo-file-selected" style="display: none;">
                                <div class="file-selected-preview">
                                    <img id="logo-file-preview" src="" alt="Logo preview" class="file-selected-image">
                                </div>
                                <span class="file-selected-name" id="logo-file-name"></span>
                                <button type="button" class="file-selected-remove" id="logo-file-remove" title="Remove">Ã—</button>
                            </div>
                        </div>
                        <div class="logo-options" style="display: none;">
                            <label data-i18n="popup_edit_modal_opacity_label">Opacity:</label>
                            <input type="range" id="logo-opacity" min="0" max="100" value="100">
                            <span id="opacity-value">100%</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="cancel-edit" data-i18n="popup_common_cancel">Cancel</button>
                <button class="action-btn secondary" id="reset-edit" data-i18n="popup_edit_modal_reset">Reset</button>
                <button class="action-btn primary" id="apply-edit" data-i18n="popup_edit_modal_apply">Apply</button>
            </div>
        </div>
    </div>

    <!-- Scan QR Code Modal -->
    <div class="modal" id="scan-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_scan_modal_title">Scan QR Code</h3>
                <button class="close-btn" id="close-scan-modal">Ã—</button>
            </div>
            <div class="modal-body">
                <!-- æ‰«ææ–¹å¼Tabå¯¼èˆª -->
                <div class="scan-tabs">
                    <button class="tab-btn active" id="scan-tab-local" data-i18n="popup_scan_modal_upload_section">Scan from Local</button>
                    <button class="tab-btn" id="scan-tab-url" data-i18n="popup_scan_option_url_title">Scan from URL</button>
                </div>

                <!-- ä¸Šä¼ å›¾ç‰‡é¡µé¢ -->
                <div class="scan-upload-section" id="scan-upload-section">
                    <div class="scan-section">
                        <div class="file-input-wrapper">
                            <input type="file" id="qr-file" accept="image/*">
                            <label for="qr-file" class="file-input-label">
                                <span class="file-input-text" data-i18n="popup_scan_modal_choose_file">Choose QR Code Image</span>
                                <span class="file-input-hint" data-i18n="popup_common_no_file_selected">No file selected</span>
                            </label>
                        </div>
                    </div>
                    <!-- å›¾ç‰‡é¢„è§ˆåŒºåŸŸ -->
                    <div class="scan-image-preview" id="scan-upload-preview" style="display: none;">
                        <img id="upload-preview-image" src="" alt="QR Code Preview" data-i18n-alt="popup_scan_preview_alt">
                    </div>
                    <!-- ä¸Šä¼ æ‰«æç»“æžœ -->
                    <div class="scan-result" id="scan-upload-result" style="display: none;">
                        <h4 data-i18n="popup_scan_modal_result_title">Scan Result</h4>
                        <div class="result-content">
                            <div class="result-type">
                                <span class="type-label" data-i18n="popup_scan_modal_result_type">Type:</span>
                                <span class="type-value" id="upload-result-type">URL</span>
                            </div>
                            <div class="result-text">
                                <span class="text-label" data-i18n="popup_scan_modal_result_content">Content:</span>
                                <div class="text-value" id="upload-result-content"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- URLè¾“å…¥é¡µé¢ -->
                <div class="scan-url-section" id="scan-url-section" style="display: none;">
                    <div class="scan-section">
                        <input type="text" class="url-input scan-url-input" id="scan-url-input" placeholder="https://example.com/qrcode.png" data-i18n-placeholder="popup_scan_url_placeholder">
                        <button class="action-btn primary scan-url-btn" id="scan-url-btn" data-i18n="popup_scan_url_scan">Scan</button>
                    </div>
                    <!-- å›¾ç‰‡é¢„è§ˆåŒºåŸŸ -->
                    <div class="scan-image-preview" id="scan-url-preview" style="display: none;">
                        <img id="url-preview-image" src="" alt="QR Code Preview" data-i18n-alt="popup_scan_preview_alt">
                    </div>
                    <!-- URLæ‰«æç»“æžœ -->
                    <div class="scan-result" id="scan-url-result" style="display: none;">
                        <h4 data-i18n="popup_scan_modal_result_title">Scan Result</h4>
                        <div class="result-content">
                            <div class="result-type">
                                <span class="type-label" data-i18n="popup_scan_modal_result_type">Type:</span>
                                <span class="type-value" id="url-result-type">URL</span>
                            </div>
                            <div class="result-text">
                                <span class="text-label" data-i18n="popup_scan_modal_result_content">Content:</span>
                                <div class="text-value" id="url-result-content"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ‰«æç»“æžœ -->
                <div class="scan-result" id="scan-result" style="display: none;">
                    <h4 data-i18n="popup_scan_modal_result_title">Scan Result</h4>
                    <div class="result-content">
                        <div class="result-type">
                            <span class="type-label" data-i18n="popup_scan_modal_result_type">Type:</span>
                            <span class="type-value" id="result-type">URL</span>
                        </div>
                        <div class="result-text">
                            <span class="text-label" data-i18n="popup_scan_modal_result_content">Content:</span>
                            <div class="text-value" id="result-content"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="open-result" data-i18n="popup_scan_modal_open">Open</button>
                <button class="action-btn primary" id="copy-result" data-i18n="popup_scan_modal_copy">Copy</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="modal" id="history-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_history_modal_title">History</h3>
                <button class="close-btn" id="close-history-modal">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="history-tabs">
                    <button class="tab-btn active" id="generate-tab" data-i18n="popup_history_tab_generated">Generated</button>
                    <button class="tab-btn" id="scan-tab" data-i18n="popup_history_tab_scanned">Scanned</button>
                </div>
                <div class="history-content">
                    <div class="history-list" id="generate-history">
                        <!-- Generated QR codes will be listed here -->
                    </div>
                    <div class="history-list" id="scan-history" style="display: none;">
                        <!-- Scanned QR codes will be listed here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="clear-history" data-i18n="popup_history_clear_all">Clear All</button>
            </div>
        </div>
    </div>

    <!-- Confirm Clear History Modal -->
    <div class="modal" id="confirm-clear-modal" style="display: none;">
        <div class="modal-content" style="max-width: 320px;">
            <div class="modal-header">
                <h3 data-i18n="popup_history_clear_all">Clear History?</h3>
                <button class="close-btn" id="close-confirm-modal">Ã—</button>
            </div>
            <div class="modal-body">
                <p data-i18n="confirm_clear_history" style="color: #000000;">Are you sure you want to clear all history? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="cancel-clear-btn" data-i18n="popup_common_cancel">Cancel</button>
                <button class="action-btn primary" id="confirm-clear-btn" data-i18n="popup_edit_modal_apply">Confirm</button>
            </div>
        </div>
    </div>

    <script src="libs/qrcode.js"></script>
    <script src="libs/qrcode-with-logo.js"></script>
    <script src="libs/jsqr.js"></script>
    <script src="libs/jsqr-improve.js"></script>
    <script src="popup.js"></script>
</body>
</html> 