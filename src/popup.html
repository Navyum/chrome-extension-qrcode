<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A simple and efficient QR Code Generator extension for Chrome. Generate QR codes for current page URL, selected text, or custom content. Scan QR codes from images.">
    <title>QR Code Generator</title>
    <link rel="stylesheet" href="popup.css">
    <!-- Modal Styles -->
    <link rel="stylesheet" href="styles/modals/base-modal.css">
    <link rel="stylesheet" href="styles/modals/edit-modal.css">
    <link rel="stylesheet" href="styles/modals/scan-modal.css">
    <link rel="stylesheet" href="styles/modals/history-modal.css">
    <link rel="stylesheet" href="styles/modals/upload-drive-modal.css">
    <link rel="stylesheet" href="styles/modals/user-info-modal.css">
    <link rel="stylesheet" href="styles/modals/confirm-modal.css">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="header-text">
                    <div class="title-container">
                        <div class="cloud-icon">
                            <img src="images/qr-icon/cloud.svg" alt="Cloud" width="24" height="24">
                        </div>
                        <h1 class="title" data-i18n="popup_title_placeholder">Title</h1>
                    </div>
                    <div class="url-input-container">
                    <input type="text" class="subtitle url-input" id="current-url" placeholder="Loading..." data-i18n-placeholder="popup_url_loading" />
                        <button class="drive-upload-icon-btn" id="upload-drive-btn" title="" data-i18n-title="popup_upload_modal_title">
                            <img src="images/qr-icon/folder.svg" alt="Upload" width="20" height="20">
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- QR Code Display Section -->
        <div class="qr-display-section">
            <div class="qr-container" id="qr-container">
                <div class="qr-placeholder">
                    <span class="placeholder-icon">üì±</span>
                    <p data-i18n="popup_qr_generating">Generating QR Code...</p>
                </div>
            </div>
        </div>

        <!-- Action Buttons Section -->
        <div class="action-buttons">
            <div class="primary-buttons">
                <button class="action-btn primary download" id="download-btn">
                    <img src="assets/download.svg" alt="Download" class="icon" data-i18n-alt="popup_download_icon_alt">
                    <span data-i18n="popup_download_button">Download QR Code</span>
                </button>
                <button class="action-btn primary copy" id="copy-btn">
                    <img src="assets/copysvg.svg" alt="Copy" class="icon" data-i18n-alt="popup_copy_icon_alt">
                </button>
            </div>
            <div class="secondary-buttons">
                <button class="action-btn secondary" id="edit-btn">
                    <img src="assets/palette.svg" alt="Edit" class="icon" data-i18n-alt="popup_edit_icon_alt">
                    <span data-i18n="popup_edit_button">Edit QR Code</span>
                </button>
                <button class="action-btn secondary" id="scan-btn">
                    <img src="assets/scan.svg" alt="Scan" class="icon" data-i18n-alt="popup_scan_icon_alt">
                    <span data-i18n="popup_scan_button">Scan QR Code</span>
                </button>
            </div>
            <div class="bottom-icons">
                <button class="bottom-icon-btn" id="history-btn" title="History" data-i18n-title="popup_history_button_title">
                    <img src="assets/history.svg" alt="History" width="16" height="16">
                </button>
                <div class="right-icons">
                    <button class="bottom-icon-btn" id="star-btn" title="Rate 5 Stars" data-i18n-title="popup_rate_button_title">
                        <img src="assets/rate.svg" alt="Rate 5 Stars" width="16" height="16">
                    </button>
                    <button class="bottom-icon-btn" id="feedback-btn" title="Feedback" data-i18n-title="popup_feedback_button_title">
                        <img src="assets/feedback.svg" alt="Feedback" width="16" height="16">
                    </button>
                    <button class="bottom-icon-btn" id="sponsor-btn" title="Sponsor" data-i18n-title="popup_sponsor_button_title">
                        <img src="assets/sponsors.svg" alt="Sponsor" width="16" height="16">
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit QR Code Modal -->
    <div class="modal" id="edit-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_edit_modal_title">Edit QR Code</h3>
                <button class="close-btn" id="close-edit-modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="edit-section">
                    <h4 data-i18n="popup_edit_modal_color_section">Color Settings</h4>
                    <div class="color-inputs">
                        <div class="color-input">
                            <label data-i18n="popup_edit_modal_foreground_label">Foreground:</label>
                            <input type="color" id="foreground-color" value="#000000">
                        </div>
                        <div class="color-input">
                            <label data-i18n="popup_edit_modal_background_label">Background:</label>
                            <input type="color" id="background-color" value="#FFFFFF">
                        </div>
                    </div>
                </div>
                
                <div class="edit-section">
                    <h4 data-i18n="popup_edit_modal_size_section">Size Settings</h4>
                    <div class="size-inputs">
                        <div class="size-input">
                            <label data-i18n="popup_edit_modal_width_label">Width:</label>
                            <input type="number" id="qr-width" value="512" min="120" max="1024">
                        </div>
                        <div class="size-input">
                            <label data-i18n="popup_edit_modal_height_label">Height:</label>
                            <input type="number" id="qr-height" value="512" min="120" max="1024">
                        </div>
                    </div>
                </div>
                
                <div class="edit-section">
                    <h4 data-i18n="popup_edit_modal_logo_section">Logo Settings</h4>
                    <div class="logo-inputs">
                        <!-- ÂÜÖÁΩÆ Logo ÈÄâÊã© -->
                        <div class="builtin-logo-section">
                            <div class="builtin-logo-grid" id="builtin-logo-grid">
                                <!-- Logo ÈÄâÈ°πÂ∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
                            </div>
                        </div>
                        <div class="logo-divider" data-i18n="popup_edit_modal_logo_divider">OR</div>
                        <!-- Ëá™ÂÆö‰πâ Logo ‰∏ä‰º† -->
                        <div class="file-input-wrapper">
                            <input type="file" id="logo-file" accept="image/*">
                            <label for="logo-file" class="file-input-label" id="logo-file-label">
                                <span class="file-input-text" data-i18n="popup_edit_modal_choose_logo">Choose Logo File</span>
                                <span class="file-input-hint" data-i18n="popup_common_no_file_selected">No file selected</span>
                            </label>
                            <div class="file-selected-display" id="logo-file-selected" style="display: none;">
                                <div class="file-selected-preview">
                                    <img id="logo-file-preview" src="" alt="Logo preview" class="file-selected-image">
                                </div>
                                <span class="file-selected-name" id="logo-file-name"></span>
                                <button type="button" class="file-selected-remove" id="logo-file-remove" title="Remove">√ó</button>
                            </div>
                        </div>
                        <div class="logo-options" style="display: none;">
                            <label data-i18n="popup_edit_modal_opacity_label">Opacity:</label>
                            <input type="range" id="logo-opacity" min="0" max="100" value="100">
                            <span id="opacity-value">100%</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="cancel-edit" data-i18n="popup_common_cancel">Cancel</button>
                <button class="action-btn secondary" id="reset-edit" data-i18n="popup_edit_modal_reset">Reset</button>
                <button class="action-btn primary" id="apply-edit" data-i18n="popup_edit_modal_apply">Apply</button>
            </div>
        </div>
    </div>

    <!-- Scan QR Code Modal -->
    <div class="modal" id="scan-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_scan_modal_title">Scan QR Code</h3>
                <button class="close-btn" id="close-scan-modal">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Êâ´ÊèèÊñπÂºèTabÂØºËà™ -->
                <div class="scan-tabs">
                    <button class="tab-btn active" id="scan-tab-local" data-i18n="popup_scan_modal_upload_section">Scan from Local</button>
                    <button class="tab-btn" id="scan-tab-url" data-i18n="popup_scan_option_url_title">Scan from URL</button>
                </div>

                <!-- ‰∏ä‰º†ÂõæÁâáÈ°µÈù¢ -->
                <div class="scan-upload-section" id="scan-upload-section">
                    <div class="scan-section">
                        <div class="file-input-wrapper">
                            <input type="file" id="qr-file" accept="image/*">
                            <label for="qr-file" class="file-input-label">
                                <span class="file-input-text" data-i18n="popup_scan_modal_choose_file">Choose QR Code Image</span>
                                <span class="file-input-hint" data-i18n="popup_common_no_file_selected">No file selected</span>
                            </label>
                        </div>
                    </div>
                    <!-- ÂõæÁâáÈ¢ÑËßàÂå∫Âüü -->
                    <div class="scan-image-preview" id="scan-upload-preview" style="display: none;">
                        <img id="upload-preview-image" src="" alt="QR Code Preview" data-i18n-alt="popup_scan_preview_alt">
                    </div>
                    <!-- ‰∏ä‰º†Êâ´ÊèèÁªìÊûú -->
                    <div class="scan-result" id="scan-upload-result" style="display: none;">
                        <h4 data-i18n="popup_scan_modal_result_title">Scan Result</h4>
                        <div class="result-content">
                            <div class="result-type">
                                <span class="type-label" data-i18n="popup_scan_modal_result_type">Type:</span>
                                <span class="type-value" id="upload-result-type">URL</span>
                            </div>
                            <div class="result-text">
                                <span class="text-label" data-i18n="popup_scan_modal_result_content">Content:</span>
                                <div class="text-value" id="upload-result-content"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- URLËæìÂÖ•È°µÈù¢ -->
                <div class="scan-url-section" id="scan-url-section" style="display: none;">
                    <div class="scan-section">
                        <input type="text" class="url-input scan-url-input" id="scan-url-input" placeholder="https://example.com/qrcode.png" data-i18n-placeholder="popup_scan_url_placeholder">
                        <button class="action-btn primary scan-url-btn" id="scan-url-btn" data-i18n="popup_scan_url_scan">Scan</button>
                    </div>
                    <!-- ÂõæÁâáÈ¢ÑËßàÂå∫Âüü -->
                    <div class="scan-image-preview" id="scan-url-preview" style="display: none;">
                        <img id="url-preview-image" src="" alt="QR Code Preview" data-i18n-alt="popup_scan_preview_alt">
                    </div>
                    <!-- URLÊâ´ÊèèÁªìÊûú -->
                    <div class="scan-result" id="scan-url-result" style="display: none;">
                        <h4 data-i18n="popup_scan_modal_result_title">Scan Result</h4>
                        <div class="result-content">
                            <div class="result-type">
                                <span class="type-label" data-i18n="popup_scan_modal_result_type">Type:</span>
                                <span class="type-value" id="url-result-type">URL</span>
                            </div>
                            <div class="result-text">
                                <span class="text-label" data-i18n="popup_scan_modal_result_content">Content:</span>
                                <div class="text-value" id="url-result-content"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Êâ´ÊèèÁªìÊûú -->
                <div class="scan-result" id="scan-result" style="display: none;">
                    <h4 data-i18n="popup_scan_modal_result_title">Scan Result</h4>
                    <div class="result-content">
                        <div class="result-type">
                            <span class="type-label" data-i18n="popup_scan_modal_result_type">Type:</span>
                            <span class="type-value" id="result-type">URL</span>
                        </div>
                        <div class="result-text">
                            <span class="text-label" data-i18n="popup_scan_modal_result_content">Content:</span>
                            <div class="text-value" id="result-content"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="open-result" data-i18n="popup_scan_modal_open">Open</button>
                <button class="action-btn primary" id="copy-result" data-i18n="popup_scan_modal_copy">Copy</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="modal" id="history-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_history_modal_title">History</h3>
                <button class="close-btn" id="close-history-modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="history-tabs">
                    <button class="tab-btn active" id="generate-tab" data-i18n="popup_history_tab_generated">Generated</button>
                    <button class="tab-btn" id="scan-tab" data-i18n="popup_history_tab_scanned">Scanned</button>
                </div>
                <div class="history-content">
                    <div class="history-list active" id="generate-history">
                        <!-- Generated QR codes will be listed here -->
                    </div>
                    <div class="history-list" id="scan-history">
                        <!-- Scanned QR codes will be listed here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="clear-history" data-i18n="popup_history_clear_all">Clear All</button>
            </div>
        </div>
    </div>

    <!-- Confirm Clear History Modal -->
    <div class="modal" id="confirm-clear-modal" style="display: none;">
        <div class="modal-content" style="max-width: 320px;">
            <div class="modal-header">
                <h3 data-i18n="popup_history_clear_all">Clear History?</h3>
                <button class="close-btn" id="close-confirm-modal">√ó</button>
            </div>
            <div class="modal-body">
                <p data-i18n="confirm_clear_history" style="color: #000000;">Are you sure you want to clear all history? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="cancel-clear-btn" data-i18n="popup_common_cancel">Cancel</button>
                <button class="action-btn primary" id="confirm-clear-btn" data-i18n="popup_edit_modal_apply">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Upload to Google Drive Modal -->
    <div class="modal" id="upload-drive-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_upload_modal_title">‰ΩøÁî®Google Drive‰ª•ÁîüÊàêQR</h3>
                <div class="header-right">
                    <div class="user-avatar-container" id="user-avatar-container" style="display: none;">
                        <img id="user-avatar" src="" alt="User Avatar" class="user-avatar" title="ÁÆ°ÁêÜÊñá‰ª∂">
                    </div>
                    <button class="close-btn" id="close-upload-modal">√ó</button>
                </div>
            </div>
            <div class="modal-body">
                <!-- ÊéàÊùÉÁôªÂΩïÁïåÈù¢ -->
                <div id="auth-section" class="auth-section" style="display: none;">
                    <div class="auth-content">
                        <div class="auth-icon">
                            <img src="images/qr-icon/google.svg" style="width:48px;height:48px">
                        </div>
                        <h3 class="auth-title" data-i18n="popup_upload_auth_title">ÊéàÊùÉ‰ΩøÁî®Google Drive</h3>
                        <p class="auth-desc" data-i18n="popup_upload_auth_desc">ËØ∑ÂÖàÊéàÊùÉÊÇ®ÁöÑGoogleË¥¶Êà∑‰ª•‰ΩøÁî®Êñá‰ª∂‰∏ä‰º†Âπ∂ÁîüÊàê‰∫åÁª¥Á†Å</p>
                        <button class="google-signin-btn" id="google-signin-btn">
                            <img src="images/qr-icon/google.svg" style="width:18px;height:18px" class="google-icon">
                            <span data-i18n="popup_upload_auth_button">‰ΩøÁî®GoogleË¥¶Êà∑</span>
                        </button>
                    </div>
                </div>

                <!-- Êñá‰ª∂‰∏ä‰º†ÁïåÈù¢ -->
                <div id="upload-section" class="upload-section" style="display: none;">
                    <!-- Êñá‰ª∂ÈÄâÊã© -->
                    <!-- ‰∏ä‰º†ÊñπÂºè -->
                    <div class="upload-mode-section">
                        <label class="upload-mode-label" data-i18n="popup_upload_mode_label">‰∏ä‰º†ÊñπÂºè</label>
                        <div class="upload-mode-options">
                            <label class="upload-mode-option" data-mode="file">
                                <input type="radio" name="upload-mode" value="file" checked>
                                <div class="upload-mode-icon">
                                    <img src="images/qr-icon/file.svg" alt="File" width="20" height="20">
                                </div>
                                <div class="upload-mode-content">
                                    <span class="upload-mode-title" data-i18n="popup_upload_mode_file">Êñá‰ª∂</span>
                                </div>
                            </label>
                            <label class="upload-mode-option" data-mode="folder">
                                <input type="radio" name="upload-mode" value="folder">
                                <div class="upload-mode-icon">
                                    <img src="images/qr-icon/folder.svg" alt="Folder" width="20" height="20">
                                </div>
                                <div class="upload-mode-content">
                                    <span class="upload-mode-title" data-i18n="popup_upload_mode_folder">Êñá‰ª∂Â§π</span>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="file-input-wrapper" style="margin-bottom: 15px;">
                        <input type="file" id="drive-upload-file" multiple style="display: none;">
                        <input type="file" id="drive-upload-folder" webkitdirectory multiple style="display: none;">
                        <label for="drive-upload-file" class="file-input-label" id="drive-file-label">
                            <span class="file-input-text" data-i18n="popup_upload_choose_file">ÈÄâÊã©Êñá‰ª∂</span>
                            <span class="file-input-hint" data-i18n="popup_common_no_file_selected">Êú™ÈÄâÊã©Êñá‰ª∂</span>
                        </label>
                    </div>
                    
                    <!-- ÂèØËßÅÊÄßÈÄâÊã© -->
                    <div class="visibility-section">
                        <label class="visibility-label" data-i18n="popup_upload_visibility_label">Êñá‰ª∂ÂèØËßÅÊÄß</label>
                        <div class="visibility-options">
                            <label class="visibility-option" data-visibility="owner">
                                <input type="radio" name="file-visibility" value="owner">
                                <div class="visibility-icon">
                                    <img src="images/qr-icon/user.svg" alt="User" width="20" height="20">
                                </div>
                                <div class="visibility-content">
                                    <span class="visibility-title" data-i18n="popup_upload_visibility_owner">‰ªÖÊâÄÊúâËÄÖ</span>
                                </div>
                            </label>
                            <label class="visibility-option" data-visibility="anyone">
                                <input type="radio" name="file-visibility" value="anyone">
                                <div class="visibility-icon">
                                    <img src="images/qr-icon/users.svg" alt="Users" width="20" height="20">
                                </div>
                                <div class="visibility-content">
                                    <span class="visibility-title" data-i18n="popup_upload_visibility_anyone">‰ªª‰ΩïÊúâÈìæÊé•ÁöÑ‰∫∫</span>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div id="upload-progress" style="display: none; margin-top: 10px;">
                        <div class="upload-progress-bar">
                            <div class="upload-progress-fill" id="upload-progress-fill"></div>
                        </div>
                        <div class="upload-progress-text" id="upload-progress-text"></div>
                    </div>
                    <div id="upload-result" style="display: none; margin-top: 10px;">
                        <div class="upload-success" id="upload-success-message"></div>
                        <div class="upload-link" id="upload-link-display"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="cancel-upload" data-i18n="popup_common_cancel">ÂèñÊ∂à</button>
                <button class="action-btn primary" id="start-upload" data-i18n="popup_upload_start" style="display: none;">ÂºÄÂßã‰∏ä‰º†</button>
            </div>
        </div>
    </div>

    <!-- Áî®Êà∑‰ø°ÊÅØÊ®°ÊÄÅÊ°Ü -->
    <div class="modal" id="user-info-modal" style="display: none;">
        <div class="modal-content user-info-modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_user_info_title">Ë¥¶Êà∑‰ø°ÊÅØ</h3>
                <button class="close-btn" id="close-user-info-modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="user-info-content">
                    <div class="user-info-avatar-section">
                        <img id="user-info-avatar" src="" alt="User Avatar" class="user-info-avatar">
                        <div class="user-info-name" id="user-info-name"></div>
                        <div class="user-info-email" id="user-info-email"></div>
                    </div>
                    <div class="user-info-actions">
                        <button class="action-btn primary" id="open-drive-folder-btn">
                            <img src="images/qr-icon/folder.svg" alt="Folder" width="16" height="16" style="margin-right: 6px;">
                            <span data-i18n="popup_user_info_open_folder">ÁÆ°ÁêÜÊñá‰ª∂</span>
                        </button>
                        <button class="action-btn secondary" id="logout-drive-btn">
                            <img src="images/qr-icon/logout.svg" alt="Logout" width="16" height="16" style="margin-right: 6px;">
                            <span data-i18n="popup_user_info_logout">ÈÄÄÂá∫ÁôªÂΩï</span>
                        </button>
                        <div class="user-info-revoke-link">
                            <a href="#" id="revoke-google-auth-link" data-i18n="popup_user_info_revoke_auth">Êí§ÈîÄ Google ÊéàÊùÉ</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- External Libraries (loaded separately as they're not bundled by webpack) -->
    <script src="libs/qrcode.js"></script>
    <script src="libs/qrcode-with-logo.js"></script>
    <script src="libs/jsqr.js"></script>
    <script src="libs/jsqr-improve.js"></script>
    <!-- 
        Modal scripts and utils are bundled into popup.js by webpack via require(),
        no need to load them separately in HTML
    -->
    <!-- Main popup script (includes all modal modules and utils via webpack) -->
    <script src="popup.js"></script>
</body>
</html> 